"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4853],{6884:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>a});var c=t(4848),l=t(8453);const i={},d=void 0,s={id:"cpp/utility/declval",title:"declval",description:"declval",source:"@site/docs/cpp/utility/declval.md",sourceDirName:"cpp/utility",slug:"/cpp/utility/declval",permalink:"/docs/cpp/utility/declval",draft:!1,unlisted:!1,editUrl:"https://github.com/1036-ce/1036-ce.github.io/blob/main/docs/cpp/utility/declval.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"user-defined-literals",permalink:"/docs/cpp/user-defined-literals"},next:{title:"variant",permalink:"/docs/cpp/variant"}},r={},a=[{value:"declval",id:"declval",level:2},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"declval",children:"declval"}),"\n",(0,c.jsxs)(n.p,{children:["\u5c06\u7c7b\u578b",(0,c.jsx)(n.code,{children:"T"}),"\u8f6c\u6362\u4e3a\u5f15\u7528\u7c7b\u578b\uff0c\u4ece\u800c\u53ef\u4ee5\u5728",(0,c.jsx)(n.code,{children:"decltype"}),"\u8868\u8fbe\u5f0f\u4e2d\u65e0\u9700\u6784\u9020\u51fd\u6570\u800c\u8c03\u7528\u6210\u5458\u6210\u5458\u51fd\u6570\u3002\n",(0,c.jsx)(n.code,{children:"std::declval"}),"\u901a\u5e38\u7528\u4e8e\u6a21\u677f\u4e2d"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:'template<typename T>\ntypename std::add_rvalue_reference<T>::type declval() noexcept\n{\n    static_assert(false, "declval not allowed in an evaluated context");\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"\u4f7f\u7528\u573a\u666f",children:"\u4f7f\u7528\u573a\u666f"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u5199cpp\u65f6\uff0c\u901a\u5e38\u9700\u8981\u4f7f\u7528",(0,c.jsx)(n.code,{children:"decltype"}),"\u83b7\u5f97\u4e00\u4e2a\u7c7b\u6210\u5458\u7684\u8fd4\u56de\u7c7b\u578b"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"struct A {\n    int foo();\n};\n\nint main() {\n    decltype(A().foo()) val = 1; // this is ok\n    return 0;\n}\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u4f46\u662f\u5f53\u7c7b",(0,c.jsx)(n.code,{children:"A"}),"\u6ca1\u6709\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u65f6\uff0c\u4e0a\u8ff0\u65b9\u6cd5\u4e0d\u80fd\u4f7f\u7528\n",(0,c.jsx)(n.code,{children:"std::declval"}),"\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8d77\u4f5c\u7528"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cpp",children:"struct A {\n    A() = delete;\n    int foo();\n};\n\nint main() {\n    decltype(A().foo()) val = 1; // this is an error\n    decltype(std::declval<A>().foo()) v1 = 1; // this is ok\n    return 0;\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>s});var c=t(6540);const l={},i=c.createContext(l);function d(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);